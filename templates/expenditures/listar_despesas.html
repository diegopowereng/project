<!doctype html>
<html lang="pt-br">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.17.1/locale/bootstrap-table-pt-BR.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://unpkg.com/bootstrap-table@1.18.3/dist/bootstrap-table.min.css" rel="stylesheet" />
    <script src="https://unpkg.com/bootstrap-table@1.18.3/dist/bootstrap-table.min.js"></script>
    <script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.17.1/locale/bootstrap-table-pt-BR.js"></script>
    <script type="text/javascript" src="//cdn.jsdelivr.net/jquery/1/jquery.min.js"></script>
    <script type="text/javascript" src="//cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
    <link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/bootstrap/3/css/bootstrap.css" />



    <title>DESPESAS!</title>
</head>

<script>
    var auxParams = null

    function ClearParams() {
        $('select').prop('selectedIndex', 0);
        var start = moment().subtract(29, 'days').locale('pt-br');
        var end = moment().locale('pt-br');
        $('#reportrange span').html(start.locale('pt-br').format('DD/MM/YYYY') + ' até ' + end.locale('pt-br').format('DD/MM/YYYY'));
        var auxP = {
            'payment': undefined,
            'expenditure_type': undefined,
            'start': undefined,
            'end': undefined
        }
        auxParams.data = auxP
        ajaxRequest(auxParams);
    }

    function ChooseFilter(field, value) {
        queryParams[field] = value.value
        auxParams.data = queryParams;
        ajaxRequest(auxParams);
    }

    var queryParams = {
        'payment': undefined,
        'expenditure_type': undefined,
        'start': undefined,
        'end': undefined
    }

    function ajaxRequest(params) {
        auxParams = params
        var url = 'https://www.drosegastronomia.com/expenditures/'
        $.get(url + '?' + $.param(auxParams.data)).then(function (res) {
            document.getElementById("sum").textContent = "R$ " + res['sum']
            document.getElementById("count").textContent = res['count'] + ' despesas'
            const formattedRes = res['results'].map(o => {
                return {
                    ...o,
                }
            });
            params.success(formattedRes);
        })
    }

    function linkFormatter(value, row, index) {
        return `${value}`;
    }
</script>


<script type="text/javascript">
    $(function () {
        var start = moment().subtract(29, 'days').locale('pt-br');
        var end = moment().locale('pt-br');
        function cb(start, end) {
            $('#reportrange span').html(start.locale('pt-br').format('DD/MM/YYYY') + ' até ' + end.locale('pt-br').format('DD/MM/YYYY'));
            //console.log(start.locale('pt-br').format('DD/MM/YYYY'), end.locale('pt-br').format('DD/MM/YYYY'))
            queryParams['start'] = start.locale('pt-br').format('YYYY-MM-DD')
            queryParams['end'] = end.locale('pt-br').format('YYYY-MM-DD')
            try {
                auxParams.data = queryParams;
                ajaxRequest(auxParams);
            } catch (error) {
                console.log('on error')
            }
        }

        $('input[id="agendamento"]').daterangepicker({
            singleDatePicker: true,
            showDropdowns: true,
            minYear: 1901,
            maxYear: parseInt(moment().format('YYYY'), 10)
        }, function (start, end, label) {
            var years = moment().diff(start, 'years');
            alert("You are " + years + " years old!");
        });

        $('#reportrange').daterangepicker({
            "showDropdowns": true,
            "autoApply": false,
            "ranges": {
                'Hoje': [moment(), moment()],
                'Ontem': [moment().subtract(1, 'days'), moment().subtract(1, 'days')],
                'Últimos 7 dias': [moment().subtract(6, 'days'), moment()],
                'Últimos 30 dias': [moment().subtract(29, 'days'), moment()],
                'Este mês': [moment().startOf('month'), moment().endOf('month')],
                'Último mês': [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month')]
            },
            "locale": {
                "format": "DD/MM/YYYY",
                "separator": " - ",
                "applyLabel": "Aplicar",
                "cancelLabel": "Cancelar",
                "fromLabel": "De",
                "toLabel": "Até",
                "customRangeLabel": "Personalizado",
                "weekLabel": "W",
                "daysOfWeek": [
                    "Dom",
                    "Seg",
                    "Ter",
                    "Qua",
                    "Qui",
                    "Sex",
                    "Sáb"
                ],
                "monthNames": [
                    "Janeiro",
                    "Fevereiro",
                    "Março",
                    "Abril",
                    "Maio",
                    "Junho",
                    "Julho",
                    "Agosto",
                    "Setembro",
                    "Outubro",
                    "Novembro",
                    "Dezembro"
                ],
                "firstDay": 1
            },
            "alwaysShowCalendars": true,
            startDate: start,
            endDate: end,
            "opens": "center"
        }, cb);
        cb(start, end);
    });
</script>
<script language="javascript">
    function moeda(a, e, r, t) {
        let n = ""
            , h = j = 0
            , u = tamanho2 = 0
            , l = ajd2 = ""
            , o = window.Event ? t.which : t.keyCode;
        if (13 == o || 8 == o)
            return !0;
        if (n = String.fromCharCode(o),
            -1 == "0123456789".indexOf(n))
            return !1;
        for (u = a.value.length,
            h = 0; h < u && ("0" == a.value.charAt(h) || a.value.charAt(h) == r); h++)
            ;
        for (l = ""; h < u; h++)
            -1 != "0123456789".indexOf(a.value.charAt(h)) && (l += a.value.charAt(h));
        if (l += n,
            0 == (u = l.length) && (a.value = ""),
            1 == u && (a.value = "0" + r + "0" + l),
            2 == u && (a.value = "0" + r + l),
            u > 2) {
            for (ajd2 = "",
                j = 0,
                h = u - 3; h >= 0; h--)
                3 == j && (ajd2 += e,
                    j = 0),
                    ajd2 += l.charAt(h),
                    j++;
            for (a.value = "",
                tamanho2 = ajd2.length,
                h = tamanho2 - 1; h >= 0; h--)
                a.value += ajd2.charAt(h);
            a.value += r + l.substr(u - 2, u)
        }

        data['amount'] = a.value;
        document.getElementById("amount_td").innerHTML = 'R$ ' + a.value;
        return !1
    }
</script>

<body>
    <div class="container">
        <h1 style="text-align: center">Controle de Despesas D'Rose</h1>
        <div class="accordion" id="accordionExample">
            <div class="card">
                <div class="card-header" id="headingOne">
                    <h2 class="mb-0">
                        <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#collapseOne"
                            aria-expanded="true" aria-controls="collapseOne">
                            CONSULTAR DESPESA
                        </button>
                    </h2>
                </div>
                <div id="collapseOne" class="collapse show" aria-labelledby="headingOne"
                    data-parent="#accordionExample">
                    <div class="card-body">
                        <div class="d-flex  m-3 row">
                            <select id="payment" onchange="ChooseFilter('payment', this)"
                                class="form-control m-2 col-sm-2">
                                <option selected disabled>Pagamento</option>
                                <option value="pix">Pix</option>
                                <option value="boleto">Boleto</option>
                                <option value="credito">Crédito</option>
                                <option value="debito">Débito</option>
                                <option value="dinheiro">Dinheiro</option>

                            </select>
                            <select onchange="ChooseFilter('expenditure_type', this)" class="form-control m-2 col-sm-2"
                                id="expenditure">
                                <option selected disabled>Tipo de Despesa</option>
                                <option value="mercadoria">Mercadoria</option>
                                <option value="embalagens">Embalagens</option>
                                <option value="despesa_variavel">Despesa Variável</option>
                                <option value="folha_gestão">Folha Gestão</option>
                                <option value="melhoria_manutencao">Melhorias e Manutenção</option>
                                <option value="folha_operação">Folha Operacional</option>
                                <option value="despesa_fixa">Despesa Fixa</option>
                                <option value="investimento">Investimento</option>
                            </select>

                            <div id="reportrange" class="form-control m-2 d-flex col-sm-2"
                                style="justify-content: space-between; align-items: center; background: #fff; cursor: pointer;">
                                <div>
                                    <i class="glyphicon glyphicon-calendar fa fa-calendar"></i>&nbsp;
                                    <span></span>
                                </div>
                                <b class="caret"></b>
                            </div>

                            <div class="btn btn-warning m-2 col-sm-2 btn-block" onclick="ClearParams()">Limpar Filtros
                            </div>
                        </div>
                        <style>
                            .card1 {
                                border: 1px solid #cacaca;
                                margin: 10px;
                                padding: 30px;
                                text-align: center;
                                display: flex;
                                flex-direction: column;
                                gap: 20px;
                            }
                        </style>


                        <div class=d-flex">
                            <div class="card1">
                                Total no período
                                <span style="font-size: large" id="sum"></span>
                            </div>
                            <div class="card1">
                                Quantidade de Lançamentos
                                <span style="font-size: large" id="count"></span>
                            </div>

                        </div>

                        <table id="table_2" data-locale="pt-br" data-toggle="table" data-ajax="ajaxRequest"
                            data-pagination="true" data-locale="pt-br" style="display: table;"
                            class="table table-striped table-hover table-responsive  m-3">
                            <thead class=">
                                <tr class= ">
                                <th style="min-width: 100% !important" data-field="created_at"
                                    data-formatter="linkFormatter" scope="col">Data</th>
                                <th width="20%" data-field="amount" scope="col">Valor</th>
                                <th width="20%" data-field="payment" scope="col">Pagamento</th>
                                <th width="20%" data-field="obs" scope="col">Informações</th>
                                <th width="20%" data-field="expenditure_type" scope="col">Tipo</th>

                                </tr>
                            </thead>
                            <tbody>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="card">
                <div class="card-header" id="headingTwo">
                    <h2 class="mb-0">
                        <button class="btn btn-link collapsed" type="button" data-toggle="collapse"
                            data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                            LANÇAR DESPESA
                        </button>
                    </h2>
                </div>
                <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordionExample">
                    <div class="card-body">
                        <div>
                            <fieldset class="form-group">
                                <div class="row p-5">
                                    <legend class="col-form-label col-sm-2 p-3">Tipo de Despesa</legend>
                                    <div class="col-sm-10" style="border-bottom: 1px solid #cacaca;">
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="expenditure_type"
                                                id="payment_radio1" value="mercadoria">
                                            <label class="form-check-label" for="payment_radio1">
                                                Mercadoria
                                            </label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="expenditure_type"
                                                id="payment_radio2" value="embalagens">
                                            <label class="form-check-label" for="payment_radio2">
                                                Embalagens
                                            </label>
                                        </div>
                                        <div class="form-check disabled">
                                            <input class="form-check-input" type="radio" name="expenditure_type"
                                                id="payment_radio3" value="revenda">
                                            <label class="form-check-label" for="payment_radio3">
                                                Revenda
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </fieldset>
                            <fieldset class="form-group">
                                <div class="row p-5">
                                    <legend class="col-form-label col-sm-2 p-3">Meio de Pagamento</legend>
                                    <div class="col-sm-10" style="border-bottom: 1px solid #cacaca;">
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="payment" id="way_radio1"
                                                value="pix">
                                            <label class="form-check-label" for="way_radio1">
                                                Pix
                                            </label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="payment" id="way_radio2"
                                                value="boleto">
                                            <label class="form-check-label" for="way_radio2">
                                                Boleto
                                            </label>
                                        </div>
                                        <div class="form-check disabled">
                                            <input class="form-check-input" type="radio" name="payment" id="way_radio3"
                                                value="credito">
                                            <label class="form-check-label" for="way_radio3">
                                                Crédito
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </fieldset>
                            <fieldset class="form-group">
                                <div class="row p-5">
                                    <legend class="col-form-label col-sm-2 p-3">Valor da Despesa</legend>
                                    <div class="col-sm-10" style="border-bottom: 1px solid #cacaca;">
                                        <div class="form-group mt-5">
                                            <label for="comprovante_input">Valor da Despesa</label>
                                            <input class="form-control" type="text" name="amount"
                                                placeholder="R$ Valor da Despesa"
                                                onKeyPress="return(moeda(this,'.',',',event))">
                                            <small id="emailHelp" class="form-text text-muted">Total gasto</small>
                                        </div>
                                    </div>
                                </div>
                            </fieldset>
                            <fieldset class="form-group">
                                <div class="row p-5">
                                    <legend class="col-form-label col-sm-2 p-3">Motivo</legend>
                                    <div class="col-sm-10" style="border-bottom: 1px solid #cacaca;">
                                        <div class="form-group mt-5">
                                            <label for="agendamento">Motivo / Informações Adicionais</label>
                                            <input id="obs_input" class="form-control" type="text" name="obs">
                                            <small id="emailHelp" class="form-text text-muted">Descreva o motivo da
                                                despesa</small>
                                        </div>
                                    </div>
                                </div>
                            </fieldset>
                            <fieldset class="form-group">
                                <div class="row p-5">
                                    <legend class="col-form-label col-sm-2 p-3">Agendamento</legend>
                                    <div class="col-sm-10" style="border-bottom: 1px solid #cacaca;">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="scheduled">
                                            <label class="form-check-label" for="gridCheck1">
                                                Despesa Agendada
                                            </label>
                                        </div>
                                        <div class="form-group mt-5" style="display: none" id="agendamento_div">
                                            <label for="agendamento">Data do Agendamento</label>
                                            <input id="agendamento" class="form-control" type="text"
                                                name="scheduled_date">
                                            <small id="emailHelp" class="form-text text-muted">Informe a data na qual a
                                                despesa será paga</small>
                                        </div>
                                    </div>
                                </div>
                            </fieldset>
                            <fieldset class="form-group">
                                <div class="row p-5">
                                    <legend class="col-form-label col-sm-2 p-3">Comprovante</legend>
                                    <div class="col-sm-10" style="border-bottom: 1px solid #cacaca;">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="receipt">
                                            <label class="form-check-label" for="gridCheck1">
                                                Despesa sem comprovante
                                            </label>
                                        </div>
                                        <div class="form-group mt-5" id="file">
                                            <label for="comprovante_input">Comprovante da Despesa</label>
                                            <input id="comprovante_input" class="form-control" name="comprovante"
                                                type="file">
                                            <small id="emailHelp" class="form-text text-muted">Upload de comprovante da
                                                despesa paga</small>
                                        </div>
                                        <div class="form-group mt-5" id="justificativa" style="display: none">
                                            <label for="justificativa_input">Justificativa</label>
                                            <input id="justificativa_input" class="form-control"
                                                placeholder="Qual a justificativa" name="justificativa_input"
                                                type="text">
                                            <small id="emailHelp" class="form-text text-muted">Justificativa para a
                                                falta de comprovante</small>
                                        </div>
                                    </div>
                                </div>
                            </fieldset>
                            <fieldset class="form-group">
                                <div class="row p-5">
                                    <legend class="col-form-label col-sm-2 p-3">Responsável</legend>
                                    <div class="col-sm-10" style="border-bottom: 1px solid #cacaca;">
                                        <div class="form-group mt-5">
                                            <label for="agendamento">Responsável pelo gasto</label>
                                            <select class="form-select" id="responsavel"
                                                aria-label="Default select example">
                                                <option value="jessica">Jessica</option>
                                                <option value="diego">Diego</option>
                                                <option value="tathi">Tathi</option>
                                            </select> <small id="emailHelp" class="form-text text-muted">Apontmento do
                                                responsável pela despesa</small>
                                        </div>
                                    </div>
                                </div>
                            </fieldset>

                            <div class="alert alert-success" role="alert">
                                <h4 class="alert-heading">Resumo do lançamento!</h4>
                                <p>Por favor, certifique-se de que as informações fornecidas estão corretas. Este
                                    sistema faz parte de uma iniciativa que visa trazer 100% de exatidão para as
                                    despesas da empresa.</p>
                                <hr>
                                <table class="table table-responsive">
                                    <thead>
                                        <tr>
                                            <th scope="col">Campo</th>
                                            <th scope="col">Valor</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr scope="row">
                                            <td>Dia</td>
                                            <td><span id="created_at_td"></span></td>
                                        </tr>
                                        <t scope="row" r>
                                            <td>Informações</td>
                                            <td><span id="obs_td"></span></td>
                                            </tr>
                                            <tr scope="row">
                                                <td>Valor</td>
                                                <td><span id="amount_td"></span></td>
                                            </tr>
                                            <tr scope="row">
                                                <td>Tipo de pagamento</td>
                                                <td><span id="payment_td"></span></td>
                                            </tr>
                                            <tr scope="row">
                                                <td>Classe</td>
                                                <td><span id="expenditure_type_td"></span></td>
                                            </tr>
                                            <tr scope="row">
                                                <td>Comprovante?</td>
                                                <td><span id="comp_td"></span></td>
                                            </tr>
                                            <tr scope="row">
                                                <td>Justificativa falta de comprovante</td>
                                                <td><span id="justificativa_td"></span></td>
                                            </tr>
                                            <tr scope="row">
                                                <td>Comprovante</td>
                                                <td><span id="file_td"></span></td>
                                            </tr>
                                            <tr scope="row">
                                                <td>Agendamento?</td>
                                                <td>Sim</td>
                                            </tr>
                                            <tr scope="row">
                                                <td>Data do pagamento</td>
                                                <td>06/08/2022</td>
                                            </tr>
                                            <tr scope="row">
                                                <td>Responsável</td>
                                                <td>Diego</td>
                                            </tr>
                                    </tbody>
                                </table>
                            </div>
                            <fieldset class="form-group">
                                <div class="row p-5">
                                    <button class="btn btn-warning btn-block" onClick="placeExpenditure()">Incluir
                                        Despesa</button>
                                </div>
                            </fieldset>
                        </div>
                    </div>
                </div>
            </div>
            <div class="card">
                <div class="card-header" id="headingThree">
                    <h2 class="mb-0">
                        <button class="btn btn-link collapsed" type="button" data-toggle="collapse"
                            data-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                            DASHBOARD
                        </button>
                    </h2>
                </div>
                <div id="collapseThree" class="collapse" aria-labelledby="headingThree" data-parent="#accordionExample">
                    <div class="card-body">
                        Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid.
                        3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt
                        laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin
                        coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes
                        anderson cred nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings
                        occaecat craft beer farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard
                        of them accusamus labore sustainable VHS.
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
    <script type="text/javascript" src="//cdn.jsdelivr.net/bootstrap.daterangepicker/2/daterangepicker.js"></script>
    <link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/bootstrap.daterangepicker/2/daterangepicker.css" />
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script>


        let data = {
            "created_at": '23-05-2022',
            "scheduled": false,
            "payment": 'pix',
            "expenditure_type": 'mercadoria',
            "obs": "repolho",
            "amount": 123.50,
            "receipt": document.getElementById("comprovante_input").files[0],
            "scheduled_date": null,
            "responsible": 'null',
            "justification": 'iuiuiu'

        };


        function getCookie(name) {
            var cookieValue = null;
            if (document.cookie && document.cookie !== '') {
                var cookies = document.cookie.split(';');
                for (var i = 0; i < cookies.length; i++) {
                    var cookie = cookies[i].trim();
                    // Does this cookie string begin with the name we want?
                    if (cookie.substring(0, name.length + 1) === (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }

        let csrftoken = getCookie('csrftoken');

        var data_FORM = new FormData()

        function placeExpenditure() {

            data_FORM.append('receipt', document.getElementById("comprovante_input").files[0])
            data_FORM.append('created_at', data['created_at'])
            data_FORM.append('scheduled', data['scheduled'])
            data_FORM.append('payment', data['payment'])
            data_FORM.append('expenditure_type', data['expenditure_type'])
            data_FORM.append('obs', data['obs'])
            data_FORM.append('amount', data['amount'])
            data_FORM.append('scheduled_date', data['scheduled_date'])
            data_FORM.append('responsible', data['responsible'])
            data_FORM.append('justification', data['justification'])


            fetch("/expenditures/", {
                method: "POST",
                credentials: "same-origin",
                headers: {  
                            'Content-Type': 'application/json', 
                            "X-CSRFToken": csrftoken, 
                        },
                body: data_FORM
            }).then(res => {
                console.log("Request complete! response:", res);
            }).catch(error => {
                console.log(error)
                console.log(error.name); // ReferenceError
                console.log(error.message); // lalala is not defined
                console.log(error.stack); // ReferenceError: lalala is not defined at (...call stack)
            });

        }

        var expenditure_type = document.getElementsByName("expenditure_type");
        for (var i = 0, max = expenditure_type.length; i < max; i++) {
            expenditure_type[i].onclick = function () {
                data['expenditure_type'] = this.value;
                document.getElementById("expenditure_type_td").innerHTML = this.value;
                console.log(data)
            }
        }

        var payment = document.getElementsByName("payment");
        for (var i = 0, max = payment.length; i < max; i++) {
            payment[i].onclick = function () {
                data['payment'] = this.value;
                document.getElementById("payment_td").innerHTML = this.value;
                console.log(data)
            }
        }

        document.addEventListener("DOMContentLoaded", function () {
            data['created_at'] = moment().locale('pt-br').format('DD-MM-YYYY');
            document.getElementById("created_at_td").innerHTML = moment().locale('pt-br').format('YYYY-MM-DD');
            var fileupload = $("#comprovante_input");
            fileupload.on('change', function () {
                data['receipt'] = this.files[0];
                console.log(this.files[0])
                document.getElementById('file_td').innerHTML = this.files[0].name
                console.log(data)
                document.getElementById('comp_td').innerHTML = 'Sim'
            });
            const source = document.getElementById('obs_input');
            const result = document.getElementById('obs_td');
            const inputHandler = function (e) {
                data['obs'] = e.target.value;
                result.innerHTML = e.target.value;
            }

            source.addEventListener('input', inputHandler);
            result.addEventListener('propertychange', inputHandler); // for IE8

            const justificativa_input_source = document.getElementById('justificativa_input');
            const justificativa_input_result = document.getElementById('justificativa_td');

            const justificativa_inputHandler = function (e) {
                data['justification'] = e.target.value;
                justificativa_input_result.innerHTML = e.target.value;
            }

            justificativa_input_source.addEventListener('input', justificativa_inputHandler);
            justificativa_input_source.addEventListener('propertychange', justificativa_inputHandler); // for IE8

            var agendamento = document.querySelector("input[name=scheduled]");
            agendamento.addEventListener('change', function () {
                if (this.checked) {
                    document.getElementById("agendamento_div").style.display = "block";

                } else {
                    document.getElementById("agendamento_div").style.display = "none";

                }
            });

            var comprovante = document.querySelector("input[name=receipt]");
            comprovante.addEventListener('change', function () {
                if (this.checked) {
                    document.getElementById("justificativa").style.display = "block";
                    document.getElementById("file").style.display = "none";
                    document.getElementById('comp_td').innerHTML = 'Não';
                    document.getElementById('comprovante_input').value = null;
                    data['receipt'] = null;
                } else {
                    document.getElementById("justificativa").style.display = "none";
                    document.getElementById('justificativa_input').value = null;
                    document.getElementById("file").style.display = "block";
                    document.getElementById('comp_td').innerHTML = 'Sim';
                    data['justification'] = null;
                }
            });

        });
    </script>
</body>

<script type="text/javascript" src="//cdn.jsdelivr.net/bootstrap.daterangepicker/2/daterangepicker.js"></script>
<link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/bootstrap.daterangepicker/2/daterangepicker.css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-maskmoney/3.0.2/jquery.maskMoney.min.js"
    integrity="sha512-Rdk63VC+1UYzGSgd3u2iadi0joUrcwX0IWp2rTh6KXFoAmgOjRS99Vynz1lJPT8dLjvo6JZOqpAHJyfCEZ5KoA=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>

</html>